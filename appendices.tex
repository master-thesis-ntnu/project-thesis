\chapter{Appendices}

\section{Elasticsearch Query}
\begin{lstlisting}[language=json, caption={Initial query to retrive query expansion data}]
{
    query : {
        terms : {
          tags : [...]
        }
    },
    size: 50,
    aggregations : {
        terms: {
            terms : {
                field : "tags.keyword",
                size: 50
            }
        },
        term_count: {
            value_count: {
                field: "tags.keyword"
            }
        }
    }
}
\end{lstlisting}

\begin{lstlisting}[language=json, caption={Search for photos with query expanded terms}]
{
    query : {
        terms : {
          tags : [...]
        }
    }
}
\end{lstlisting}

\section{Photo Data Representation}
\begin{lstlisting}[language={json}, caption={Internal photo data representation in elasticsearch}]
{
    title: "title",
    tags: [
      "blue",
      "sky"
    ]
}
\end{lstlisting}
